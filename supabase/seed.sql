
-- Development Seed Data for Nightli Nova Vibes
-- This file contains realistic test data for development

-- Note: This seed file assumes users will be created through the authentication system
-- The UUIDs below are examples - in practice, these would be generated by Supabase Auth

-- Clear existing data (in reverse dependency order)
DELETE FROM public.notifications;
DELETE FROM public.messages;
DELETE FROM public.thread_participants;
DELETE FROM public.message_threads;
DELETE FROM public.plan_participants;
DELETE FROM public.plan_stops;
DELETE FROM public.plans;
DELETE FROM public.friends;
DELETE FROM public.check_ins;
DELETE FROM public.user_vibes;
DELETE FROM public.user_presence;
DELETE FROM public.user_favorites;
DELETE FROM public.activity_feeds;
DELETE FROM public.photos;
DELETE FROM public.post_interactions;
DELETE FROM public.social_intelligence;
DELETE FROM public.social_posts;
DELETE FROM public.venue_activity;
DELETE FROM public.co_planning_participants;
DELETE FROM public.draft_stops;
DELETE FROM public.co_planning_drafts;
DELETE FROM public.venues;
DELETE FROM public.profiles;

-- ========================================
-- VENUES (Independent table - no foreign keys)
-- ========================================

INSERT INTO public.venues (id, name, address, venue_type, vibe, price_level, rating, latitude, longitude, features, is_open_now, crowd_level, avg_cost, estimated_time, image_url, phone, website, created_at, updated_at) VALUES
(1, 'The Electric Lounge', '123 Main St, Downtown', 'lounge', 'upscale', 3, 4.2, 34.0522, -118.2437, ARRAY['Live Music', 'VIP Tables', 'Craft Cocktails'], true, 75, 40, 90, 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400', '+1-555-0101', 'https://electriclounge.com', now(), now()),
(2, 'Pulse Nightclub', '456 Dance Ave, Downtown', 'club', 'electric', 4, 4.5, 34.0525, -118.2440, ARRAY['DJ Sets', 'Dance Floor', 'Bottle Service'], true, 90, 60, 120, 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400', '+1-555-0102', 'https://pulsenightclub.com', now(), now()),
(3, 'Rooftop 360', '789 Skyline Blvd, Downtown', 'rooftop', 'intimate', 4, 4.7, 34.0520, -118.2435, ARRAY['City Views', 'Craft Cocktails', 'Small Plates'], true, 60, 35, 90, 'https://images.unsplash.com/photo-1449824913935-59a10b8d2000?w=400', '+1-555-0103', 'https://rooftop360.com', now(), now()),
(4, 'The Basement', '321 Underground St, Downtown', 'bar', 'casual', 2, 4.0, 34.0518, -118.2442, ARRAY['Live Music', 'Craft Beer', 'Food Trucks'], true, 50, 25, 90, 'https://images.unsplash.com/photo-1514933651103-005eec06c04b?w=400', '+1-555-0104', 'https://thebasement.com', now(), now()),
(5, 'Velvet Room', '654 Luxury Lane, Downtown', 'lounge', 'upscale', 4, 4.3, 34.0524, -118.2438, ARRAY['VIP Service', 'Craft Cocktails', 'Private Booths'], true, 80, 50, 90, 'https://images.unsplash.com/photo-1493225457124-a3eb161ffa5f?w=400', '+1-555-0105', 'https://velvetroom.com', now(), now());

-- ========================================
-- SAMPLE USER PROFILES
-- Note: In production, these would be created via auth signup
-- These are sample UUIDs for development only
-- ========================================

-- Create sample profiles (these would normally be created by the auth trigger)
INSERT INTO public.profiles (id, full_name, username, avatar_url, created_at, updated_at) VALUES
('11111111-1111-1111-1111-111111111111', 'Sarah Chen', 'sarah_chen', 'https://api.dicebear.com/7.x/avataaars/svg?seed=Sarah', now(), now()),
('22222222-2222-2222-2222-222222222222', 'Alex Rodriguez', 'alex_rodriguez', 'https://api.dicebear.com/7.x/avataaars/svg?seed=Alex', now(), now()),
('33333333-3333-3333-3333-333333333333', 'Jordan Smith', 'jordan_smith', 'https://api.dicebear.com/7.x/avataaars/svg?seed=Jordan', now(), now()),
('44444444-4444-4444-4444-444444444444', 'Maya Patel', 'maya_patel', 'https://api.dicebear.com/7.x/avataaars/svg?seed=Maya', now(), now()),
('55555555-5555-5555-5555-555555555555', 'Chris Johnson', 'chris_johnson', 'https://api.dicebear.com/7.x/avataaars/svg?seed=Chris', now(), now());

-- ========================================
-- FRIENDSHIPS
-- ========================================

INSERT INTO public.friends (user_id, friend_id, status, created_at, accepted_at) VALUES
-- Sarah's friendships
('11111111-1111-1111-1111-111111111111', '22222222-2222-2222-2222-222222222222', 'accepted', now() - interval '30 days', now() - interval '29 days'),
('11111111-1111-1111-1111-111111111111', '33333333-3333-3333-3333-333333333333', 'accepted', now() - interval '25 days', now() - interval '24 days'),
('11111111-1111-1111-1111-111111111111', '44444444-4444-4444-4444-444444444444', 'accepted', now() - interval '20 days', now() - interval '19 days'),

-- Alex's friendships
('22222222-2222-2222-2222-222222222222', '11111111-1111-1111-1111-111111111111', 'accepted', now() - interval '30 days', now() - interval '29 days'),
('22222222-2222-2222-2222-222222222222', '33333333-3333-3333-3333-333333333333', 'accepted', now() - interval '15 days', now() - interval '14 days'),
('22222222-2222-2222-2222-222222222222', '55555555-5555-5555-5555-555555555555', 'accepted', now() - interval '10 days', now() - interval '9 days'),

-- Jordan's friendships
('33333333-3333-3333-3333-333333333333', '11111111-1111-1111-1111-111111111111', 'accepted', now() - interval '25 days', now() - interval '24 days'),
('33333333-3333-3333-3333-333333333333', '22222222-2222-2222-2222-222222222222', 'accepted', now() - interval '15 days', now() - interval '14 days'),

-- Pending friend requests
('44444444-4444-4444-4444-444444444444', '55555555-5555-5555-5555-555555555555', 'pending', now() - interval '2 days', null),
('55555555-5555-5555-5555-555555555555', '33333333-3333-3333-3333-333333333333', 'pending', now() - interval '1 day', null);

-- ========================================
-- PLANS
-- ========================================

INSERT INTO public.plans (id, name, description, plan_date, plan_time, status, creator_id, estimated_cost, duration, notes, share_link, rsvp_going, rsvp_maybe, rsvp_cant_go, attendees_count, created_at, updated_at) VALUES
-- Active plans
(1, 'Downtown Night Out', 'Hitting the best spots downtown! Starting at Electric Lounge for cocktails, then Pulse for dancing.', current_date + interval '1 day', '20:00:00', 'planned', '11111111-1111-1111-1111-111111111111', '$80-120', '5-6 hours', 'Bring your dancing shoes!', 'https://nightli.app/plan/downtown-night-abc123', 2, 1, 0, 3, now() - interval '2 hours', now()),
(2, 'Chill Rooftop Evening', 'Casual rooftop drinks and small plates with amazing city views.', current_date + interval '2 days', '19:00:00', 'planned', '22222222-2222-2222-2222-222222222222', '$40-60', '3-4 hours', 'Perfect for catching up!', 'https://nightli.app/plan/rooftop-chill-def456', 2, 0, 0, 2, now() - interval '1 hour', now()),
(3, 'Weekend Club Night', 'High-energy night at Pulse with bottle service.', current_date + interval '3 days', '22:00:00', 'planned', '33333333-3333-3333-3333-333333333333', '$150-250', '4-5 hours', 'VIP table reserved!', 'https://nightli.app/plan/club-night-ghi789', 3, 0, 0, 3, now() - interval '30 minutes', now());

-- ========================================
-- PLAN PARTICIPANTS
-- ========================================

INSERT INTO public.plan_participants (plan_id, user_id, role, rsvp_status, invited_at, responded_at) VALUES
-- Downtown Night Out participants
(1, '11111111-1111-1111-1111-111111111111', 'creator', 'going', now() - interval '2 hours', now() - interval '2 hours'),
(1, '22222222-2222-2222-2222-222222222222', 'participant', 'going', now() - interval '2 hours', now() - interval '1 hour 30 minutes'),
(1, '33333333-3333-3333-3333-333333333333', 'participant', 'maybe', now() - interval '2 hours', now() - interval '1 hour'),

-- Chill Rooftop Evening participants
(2, '22222222-2222-2222-2222-222222222222', 'creator', 'going', now() - interval '1 hour', now() - interval '1 hour'),
(2, '11111111-1111-1111-1111-111111111111', 'participant', 'going', now() - interval '1 hour', now() - interval '30 minutes'),

-- Weekend Club Night participants
(3, '33333333-3333-3333-3333-333333333333', 'creator', 'going', now() - interval '30 minutes', now() - interval '30 minutes'),
(3, '11111111-1111-1111-1111-111111111111', 'participant', 'going', now() - interval '30 minutes', now() - interval '20 minutes'),
(3, '22222222-2222-2222-2222-222222222222', 'participant', 'going', now() - interval '30 minutes', now() - interval '10 minutes');

-- ========================================
-- PLAN STOPS
-- ========================================

INSERT INTO public.plan_stops (plan_id, venue_id, stop_order, estimated_time, cost, notes, created_at) VALUES
-- Downtown Night Out stops
(1, 1, 1, 90, 40, 'Start with craft cocktails', now() - interval '2 hours'),
(1, 2, 2, 120, 60, 'Dance the night away!', now() - interval '2 hours'),

-- Chill Rooftop Evening stops
(2, 3, 1, 180, 50, 'Perfect for sunset drinks', now() - interval '1 hour'),

-- Weekend Club Night stops
(3, 2, 1, 240, 80, 'VIP table with bottle service', now() - interval '30 minutes');

-- ========================================
-- USER PRESENCE
-- ========================================

INSERT INTO public.user_presence (user_id, status, last_seen, activity, current_location, updated_at) VALUES
('11111111-1111-1111-1111-111111111111', 'online', now(), 'Planning tonight''s adventure', '{"venue": "Home", "lat": 34.0522, "lng": -118.2437}', now()),
('22222222-2222-2222-2222-222222222222', 'online', now() - interval '5 minutes', 'Getting ready to go out', '{"venue": "Home", "lat": 34.0525, "lng": -118.2440}', now() - interval '5 minutes'),
('33333333-3333-3333-3333-333333333333', 'offline', now() - interval '1 hour', 'Last seen at Pulse Nightclub', '{"venue": "Pulse Nightclub", "lat": 34.0525, "lng": -118.2440}', now() - interval '1 hour'),
('44444444-4444-4444-4444-444444444444', 'online', now() - interval '30 minutes', 'Browsing venues', '{"venue": "Home", "lat": 34.0520, "lng": -118.2435}', now() - interval '30 minutes'),
('55555555-5555-5555-5555-555555555555', 'offline', now() - interval '2 hours', 'Just left Rooftop 360', '{"venue": "Rooftop 360", "lat": 34.0520, "lng": -118.2435}', now() - interval '2 hours');

-- ========================================
-- USER VIBES
-- ========================================

INSERT INTO public.user_vibes (user_id, vibe_type, location_name, latitude, longitude, intensity, is_active, expires_at, created_at, updated_at) VALUES
('11111111-1111-1111-1111-111111111111', 'hype-night', 'Home', 34.0522, -118.2437, 8, true, now() + interval '6 hours', now() - interval '30 minutes', now()),
('22222222-2222-2222-2222-222222222222', 'going-out', 'Downtown', 34.0525, -118.2440, 7, true, now() + interval '5 hours', now() - interval '15 minutes', now()),
('33333333-3333-3333-3333-333333333333', 'hype-night', 'Pulse Nightclub', 34.0525, -118.2440, 9, true, now() + interval '4 hours', now() - interval '1 hour', now()),
('44444444-4444-4444-4444-444444444444', 'chill-mode', 'Home', 34.0520, -118.2435, 5, true, now() + interval '8 hours', now() - interval '45 minutes', now()),
('55555555-5555-5555-5555-555555555555', 'chill-mode', 'Rooftop 360', 34.0520, -118.2435, 6, false, now() - interval '1 hour', now() - interval '3 hours', now() - interval '2 hours');

-- ========================================
-- USER FAVORITES
-- ========================================

INSERT INTO public.user_favorites (user_id, venue_id, created_at) VALUES
-- Sarah's favorites
('11111111-1111-1111-1111-111111111111', 1, now() - interval '15 days'),
('11111111-1111-1111-1111-111111111111', 3, now() - interval '10 days'),

-- Alex's favorites
('22222222-2222-2222-2222-222222222222', 2, now() - interval '12 days'),
('22222222-2222-2222-2222-222222222222', 4, now() - interval '8 days'),

-- Jordan's favorites
('33333333-3333-3333-3333-333333333333', 5, now() - interval '5 days');

-- ========================================
-- CHECK-INS
-- ========================================

INSERT INTO public.check_ins (user_id, venue_id, plan_id, check_in_time, crowd_level, rating, mood, notes, privacy_level, created_at) VALUES
-- Recent check-ins
('22222222-2222-2222-2222-222222222222', 1, 1, now() - interval '2 hours', 75, 4, 'excited', 'Amazing craft cocktails!', 'friends', now() - interval '2 hours'),
('33333333-3333-3333-3333-333333333333', 2, 3, now() - interval '3 hours', 90, 5, 'hyped', 'Incredible energy tonight!', 'friends', now() - interval '3 hours'),
('55555555-5555-5555-5555-555555555555', 3, null, now() - interval '4 hours', 60, 4, 'relaxed', 'Perfect sunset views', 'friends', now() - interval '4 hours');

-- ========================================
-- MESSAGE THREADS
-- ========================================

INSERT INTO public.message_threads (id, thread_type, title, context, created_by, plan_id, created_at, last_message_at) VALUES
('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', 'direct', null, 'direct', '11111111-1111-1111-1111-111111111111', null, now() - interval '2 hours', now() - interval '5 minutes'),
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', 'plan', 'Downtown Night Out Chat', 'plan', '11111111-1111-1111-1111-111111111111', 1, now() - interval '2 hours', now() - interval '10 minutes'),
('cccccccc-cccc-cccc-cccc-cccccccccccc', 'direct', null, 'direct', '22222222-2222-2222-2222-222222222222', null, now() - interval '1 hour', now() - interval '15 minutes');

-- ========================================
-- THREAD PARTICIPANTS
-- ========================================

INSERT INTO public.thread_participants (thread_id, user_id, joined_at, last_read_at) VALUES
-- Direct message between Sarah and Alex
('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111', now() - interval '2 hours', now() - interval '5 minutes'),
('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '22222222-2222-2222-2222-222222222222', now() - interval '2 hours', now() - interval '10 minutes'),

-- Plan chat for Downtown Night Out
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '11111111-1111-1111-1111-111111111111', now() - interval '2 hours', now() - interval '10 minutes'),
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '22222222-2222-2222-2222-222222222222', now() - interval '2 hours', now() - interval '15 minutes'),
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '33333333-3333-3333-3333-333333333333', now() - interval '2 hours', now() - interval '20 minutes'),

-- Direct message between Alex and Chris
('cccccccc-cccc-cccc-cccc-cccccccccccc', '22222222-2222-2222-2222-222222222222', now() - interval '1 hour', now() - interval '15 minutes'),
('cccccccc-cccc-cccc-cccc-cccccccccccc', '55555555-5555-5555-5555-555555555555', now() - interval '1 hour', now() - interval '30 minutes');

-- ========================================
-- MESSAGES
-- ========================================

INSERT INTO public.messages (thread_id, sender_id, content, message_type, created_at) VALUES
-- Direct messages between Sarah and Alex
('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111', 'Hey! Are you still down for tonight?', 'text', now() - interval '1 hour 30 minutes'),
('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '22222222-2222-2222-2222-222222222222', 'Absolutely! Can''t wait for Electric Lounge', 'text', now() - interval '1 hour 15 minutes'),
('aaaaaaaa-aaaa-aaaa-aaaa-aaaaaaaaaaaa', '11111111-1111-1111-1111-111111111111', 'Perfect! See you at 8', 'text', now() - interval '5 minutes'),

-- Plan chat messages
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '11111111-1111-1111-1111-111111111111', 'Just created our plan for tonight!', 'text', now() - interval '2 hours'),
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '22222222-2222-2222-2222-222222222222', 'Love the plan! Electric Lounge then Pulse sounds perfect', 'text', now() - interval '1 hour 45 minutes'),
('bbbbbbbb-bbbb-bbbb-bbbb-bbbbbbbbbbbb', '33333333-3333-3333-3333-333333333333', 'I might be a bit late, but I''ll try to make it!', 'text', now() - interval '10 minutes');

-- ========================================
-- NOTIFICATIONS
-- ========================================

INSERT INTO public.notifications (user_id, notification_type, title, content, related_user_id, related_plan_id, is_read, expires_at, created_at) VALUES
-- Friend request notifications
('11111111-1111-1111-1111-111111111111', 'friend_request', 'New Friend Request', 'Maya wants to be your friend', '44444444-4444-4444-4444-444444444444', null, false, null, now() - interval '2 days'),
('33333333-3333-3333-3333-333333333333', 'friend_request', 'New Friend Request', 'Chris wants to be your friend', '55555555-5555-5555-5555-555555555555', false, null, now() - interval '1 day'),

-- Plan notifications
('22222222-2222-2222-2222-222222222222', 'plan_invite', 'Plan Invite', 'Sarah invited you to Downtown Night Out', '11111111-1111-1111-1111-111111111111', 1, true, null, now() - interval '2 hours'),
('33333333-3333-3333-3333-333333333333', 'plan_invite', 'Plan Invite', 'Sarah invited you to Downtown Night Out', '11111111-1111-1111-1111-111111111111', 1, true, null, now() - interval '2 hours'),

-- Check-in notifications
('11111111-1111-1111-1111-111111111111', 'check_in', 'Friend Check-in', 'Alex checked in at Electric Lounge', '22222222-2222-2222-2222-222222222222', null, false, now() + interval '1 hour', now() - interval '2 hours'),
('22222222-2222-2222-2222-222222222222', 'check_in', 'Friend Check-in', 'Jordan checked in at Pulse Nightclub', '33333333-3333-3333-3333-333333333333', null, false, now() + interval '30 minutes', now() - interval '3 hours');

-- ========================================
-- VENUE ACTIVITY
-- ========================================

INSERT INTO public.venue_activity (venue_id, activity_date, hour_of_day, check_in_count, total_visitors, average_rating, average_crowd_level, peak_crowd_time, created_at, updated_at) VALUES
-- Electric Lounge activity
(1, current_date, 20, 5, 25, 4.2, 75, '21:30:00', now(), now()),
(1, current_date, 21, 8, 40, 4.3, 85, '21:30:00', now(), now()),
(1, current_date, 22, 6, 30, 4.1, 70, '21:30:00', now(), now()),

-- Pulse Nightclub activity
(2, current_date, 22, 12, 60, 4.5, 90, '23:00:00', now(), now()),
(2, current_date, 23, 15, 75, 4.6, 95, '23:00:00', now(), now()),
(2, current_date - interval '1 day', 23, 10, 50, 4.4, 85, '23:30:00', now(), now()),

-- Rooftop 360 activity
(3, current_date, 19, 8, 20, 4.7, 60, '20:00:00', now(), now()),
(3, current_date, 20, 12, 30, 4.8, 70, '20:00:00', now(), now());

-- ========================================
-- ACTIVITY FEEDS
-- ========================================

INSERT INTO public.activity_feeds (user_id, activity_type, title, content, related_user_id, venue_id, plan_id, privacy_level, created_at, updated_at) VALUES
-- Sarah's activities
('11111111-1111-1111-1111-111111111111', 'plan_created', 'Created a new plan', 'Downtown Night Out', null, null, 1, 'friends', now() - interval '2 hours', now() - interval '2 hours'),
('11111111-1111-1111-1111-111111111111', 'friend_added', 'New friend connection', 'Connected with Maya', '44444444-4444-4444-4444-444444444444', null, null, 'friends', now() - interval '20 days', now() - interval '20 days'),

-- Alex's activities
('22222222-2222-2222-2222-222222222222', 'check_in', 'Checked in', 'At Electric Lounge', null, 1, 1, 'friends', now() - interval '2 hours', now() - interval '2 hours'),
('22222222-2222-2222-2222-222222222222', 'plan_joined', 'Joined a plan', 'Downtown Night Out', '11111111-1111-1111-1111-111111111111', null, 1, 'friends', now() - interval '1 hour 30 minutes', now() - interval '1 hour 30 minutes'),

-- Jordan's activities
('33333333-3333-3333-3333-333333333333', 'check_in', 'Checked in', 'At Pulse Nightclub', null, 2, 3, 'friends', now() - interval '3 hours', now() - interval '3 hours'),
('33333333-3333-3333-3333-333333333333', 'plan_created', 'Created a new plan', 'Weekend Club Night', null, null, 3, 'friends', now() - interval '30 minutes', now() - interval '30 minutes');

-- ========================================
-- END OF SEED DATA
-- ========================================

-- Refresh any materialized views if they exist
-- (None currently defined, but good practice for future)

-- Update table statistics for better query planning
ANALYZE public.venues;
ANALYZE public.plans;
ANALYZE public.friends;
ANALYZE public.messages;
ANALYZE public.notifications;
